# WhatsApp Broadcaster - Setup & Run Instructions

## Prerequisites
- Python 3.8 or higher
- Google Chrome browser installed
- Excel file with contacts

## Step 1: Install Dependencies

```bash
cd /Users/santoshpawar/code/wa_broadcaster
pip3 install -r requirements.txt
```

Or install manually:
```bash
pip3 install selenium webdriver-manager pandas pyperclip openpyxl
```

## Step 2: Prepare Your Configuration

### A. Edit Contacts (Required)
Open `config/contacts.xlsx` and add your contacts with two columns:
- **Name**: Contact name
- **WhatsApp Number**: Phone number with country code (e.g., 919876543210)
- **nick_name**: Nick name of the contact. (If you want to include nick name in the message)

### B. Edit Message (Required)
Edit `config/message.txt` and add your message content. Supports:
- Multiple lines
- Emojis
- Special characters
- If you use place holder "<nick_name>" in the message, it will be replaced with the string provided in nick_name column

### C. Exclude Numbers (Optional)
Add phone numbers (one per line) to `config/exclude.txt` to skip them.

### D. Update config.json (Optional)
Edit `config.json` if you want to change:
- **default_delay**: Seconds between messages (default: 5)
- **timeouts**: Pause intervals to avoid rate limiting
  - `"100": 30` means pause 30 minutes after 100 messages
  - `"300": 30` means pause 30 minutes after 300 messages
- **chrome_user_data**: Chrome profile path (keeps WhatsApp logged in)

## Step 3: Run the Application

```bash
cd /Users/santoshpawar/code/wa_broadcaster/src
python3 wa_broadcaster.py --config ../config.json
```

## What Happens When You Run

1. **Chrome Opens**: WhatsApp Web loads automatically
2. **QR Code Scan** (First time only): Scan QR code with your phone
3. **Test Message**: Enter your phone number to receive a test message
4. **Verification**: Check the test message and type "Yes" to proceed
5. **Bulk Sending**: Messages are sent to all contacts automatically
6. **Progress**: Watch the console for real-time status

## Output Files

After running, check these files in `config/` folder:
- `whatsapp.log`: Detailed log of all operations
- `sent_numbers.log`: Successfully sent numbers (won't resend on retry)
- `failed_numbers.log`: Failed numbers with error reasons

## Resume Capability

If the script stops, simply run it again with the same config. It will:
- Skip numbers already in `sent_numbers.log`
- Skip numbers in `exclude.txt`
- Continue from where it left off

## Troubleshooting

### "Chrome driver not found"
- Make sure Chrome browser is installed
- The script will auto-download ChromeDriver on first run

### "File not found" errors
- Verify you're running from `/Users/santoshpawar/code/wa_broadcaster/src/`
- Check that `config.json` path is correct

### Messages not formatting correctly
- The app preserves line breaks and emojis
- Test message helps verify formatting before bulk send

### Rate limiting / Account blocked
- Increase `default_delay` in config.json
- Add more timeout intervals (e.g., pause every 50 messages)
- Don't send more than 200-300 messages per day initially

## Important Notes

⚠️ **Chrome Profile**: The first run creates a persistent Chrome profile at `/tmp/WhatsAppSession/Session1`. Delete this folder to force a new QR code scan.
